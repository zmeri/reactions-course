<!DOCTYPE html>
<html lang="et">
<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      CommonHTML: { linebreaks: { automatic: true } }
    });
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS_CHTML"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet"
        href="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/styles/default.min.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/highlight.min.js"></script>  <script>hljs.highlightAll();</script>

  <link rel="stylesheet" href="/reactions-course/styles/reactions.css?v=0.0.2">

  <script>
    $(function(){
      $("#navigation").load(`/reactions-course/src/navigation.html?v=0.0.4`);
    });
  </script>
  <script>
    $(document).on("click", ".collapsible-button", function(){
      if ($(this).parent().hasClass("expanded")) {
        $(this).parent().removeClass("expanded");
      } else {
        $(this).parent().addClass("expanded");
      }
    });
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Mittestatsionaarsed reaktorid</title>
</head>

<body>
  <div id='content'>
    <div id="navigation"></div>
    <div id='main-text'>
      <h1>Mittestatsionaarsed reaktorid</h1>
      <p>
        Mudeli lihtsustamiseks sageli võtame eeldust, et reaktor töötab statsionaarses re&#382;iimis, aga mõnikord toimuvad olulised muutused ajas ja ei saa seda eeldust võtta.
      </p>

      <h2 id="aja-tuletis">Tuletis aja suhtes</h2>
      <p>
        Mittestatsionaarses olukorras on oluline, kuidas reaktor reageerib muutustele. Bilansides on tuletis aja suhtes, mis näitab, kuidas parameetreid muutuvad ajas. Näiteks, kui reaktsiooni kiirus ei ole tasakaalus ühendi kogustega, mis sisenevad ja lahkuvad reaktoris, siis ühend hakkab kogunema või kaduma reaktorist. Ehk, kontsentratsioon muutub segus reaktsiooni tõttu. Energiabilansis võib samuti arvesse võtta energiataseme kasvamine või kahanemine, mis omakorda muudab temperatuuri reaktoris.
      </p>
      <p>
        Vaatame täpsemalt moolbilansi ja seda osa, mis kajastab muutust ajas.
      </p>
      <div>
        \[ \frac{dn_A}{dt} = \dot n_{A0} - \dot n_A + \int r_A dV \]
      </div>
      <p>
        Siin bilansis \( \frac{dn_A}{dt} \) näitab, kuidas ühe ühendi moolide arv reaktoris muutub ajas. Tihti väljendame tuletist hoopis kontsentratsiooni järgi sedasi:
      </p>
      <div>
        \[ V \frac{dC_A}{dt} = \dot n_{A0} - \dot n_A + \int r_A dV \]
      </div>
      <p>
        Kui reaktori maht (<em>V</em>) muutub ka ajas, siis see peab tuletise sisse jääma.
      </p>
      <p>
        Bilansist näeme, et muutuste kiirus sõltub tavaliselt reaktori mahust. Ehk, kui reaktor on suurem, siis kontsentratsioonid reaktoris muutuvad aeglasemalt, kui kõik muud tingimused reaktorites on samad. Sarnast asja võib näha energiabilansist.
      </p>
      <div>
        \[ \sum_i n_i C_{p,i} \frac{dT}{dt} = \sum_i \dot n_{0,i} C_{p,i} (T - T_0) + r_A V \Delta H_{rxn} + \dot n_{faasimuutus} \Delta H_{faasimuutus} + Q \]
      </div>
      <p>
        Ained nõuavad teatud energia kogust selleks, et temperatuur tõuseks ühe kraadi võrra. Sellepärast, energiabilansi vasakul poolel esineb iga ühendi moolide arv (<em>n<sub>i</sub></em>) ja soojusmahtuvus (<em>C<sub>p</sub></em>). Kui reaktoris ainete kogused on suuremad või kui ainetel on kõrgemad soojusmahtuvus, siis temperatuur reaktoris muutub selle võrra aeglasemalt.
      </p>

      <h2 id="muutused-v2ljaspoolt">Muutused väljaspoolt</h2>
      <p>
        Protsessid reaktoris võivad põhjustada muutusi ajas, aga paljud muutused tekivad just mõjudest, mis tulevad väljaspoolt reaktorist. Näiteks, kui reaktorit pannakse tööle alguses reaktor on külm ja lisatakse rohkem soojust selleks, et tõsta reaktori temperatuuri. Või saab toimuda häired süsteemis, mis põhjustavad kõikumisi. Näiteks, reagendi kontsentratsioon sisenevas voos mingil määral varieerub, mis omakorda põhjustab muutusi reaktori töös. Samuti temperatuur reaktoris peaaegu alati kõigub kuna soojusläbikanne reaktori ja ümbruse vahel ei ole päris stabiilne. Kui sellised kõikumised on piisavalt väikesed võime otsustada, et need pole olulised ja võime ikkagi võtta eeldust, et reaktor töötab statsionaarses re&#382;iimis. Kuid mõnikord on vaja täpsemalt modelleerima neid muutusi.
      </p>
      <p>
        Kui muutus tuleb väljaspoolt, siis on vaja lisa informatsiooni sellest, kuidas massi- või soojusläbikanne reaktori ja ümbruse vahel muutub ajas. Seda saab kirjeldada valemiga, ehk ühe konkreetse väärtuse asemel oleks nüüd matemaatiline valem, mis sõltuks ajast ja annaks parameetri väärtust igal ajahetkel. Kui lahendadakse numbriliste meetoditega, siis saab valida diskreetseid hetkeid ajas, mille juures arvutust teha. Sellisel juhul saab otse määrata parameetri väärtust nendel ajahetketel, mida valitakse.
      </p>

      <h2 id="n2ide">Näide</h2>
      <p>
        Metüülbromiidi  saamiseks  viiakse  läbi  pöördumatu  vedelfaasiline lihtreaktsioon poolperioodilises reaktoris:
      </p>
      <div>
        \[ CNBr + CH_3NH_2 \rightarrow CH_3Br + NCNH_2 \]
      </div>
      <p>
        Alguses on juba reaktoris 5 liitrit lahust, mis sisaldab 0,05 mol/l ainet A (CNBr). Siis hakatakse lisama lahust, mis sisaldab aine B (CH<sub>3</sub>NH<sub>2</sub>) kontsentratsioonis 0,025 mol/l. Leida  broomtsüaniidi (A) konversiooniastme sõltuvust ajast. Samuti leida broomtsüaniidi, metüülamiini  ja  metüülbromiidi kontsentratsiooni sõltuvust ajast.
      </p>
      <p>
        Teist lahust lisatakse mahtkuluga 0,05 l s<sup>-1</sup>. Reaktsiooni kiiruskonstant antud tingimustel on 2,2 l s<sup>-1</sup> mol<sup>-1</sup>.
      </p>
      <div class="collapsible">
        <button class="collapsible-button">
          <span class="show-label">
            Näita lahendust
            <img class="carrot" src="/reactions-course/icons/downcarrot.svg" />
          </span>
          <span class="close-label">
            Peida lahendust
            <img class="carrot" src="/reactions-course/icons/upcarrot.svg" />
          </span>
        </button>
        <div class="collapsible-text-long">
          <p>
            Alustame moolbilansiga. Kuna eeldame, et reaktisooni kiirus on sama igal pool reaktoris, siis me ei pea integreerima mahu suhtes.
          </p>
          <div>
            \[ \frac{dn_A}{dt} = r_A V \]
          </div>
          <p>
            Kuigi aine B lisatakse pidevalt reaktorisse, antud moolbilanss on aine A jaoks ja sellepärast ei esine moolkulu reaktorisse.
          </p>
          <p>
            Seejärel võime lisada reaktsiooni kiiruse valemi.
          </p>
          <div>
            \[ \frac{dn_A}{dt} = -k C_A C_B V \]
          </div>
          <p>
            Antud ülesandes vedeliku maht reaktoris pidevalt suureneb kuna on poolperioodiline reaktor. Sellepärast antud juhul oleks vist mugavam asendada kontsentratsioone moolide arvuga kuna kontsentratsioon muutub mahuga.
          </p>
          <div>
            \[ \frac{dn_A}{dt} = -k \frac{n_A}{V} \frac{n_B}{V} V \]
          </div>
          <p>
            Lisaks, reaktsiooni kiirus sõltub kahest ainest ja seega on võibolla lihtsam lahendada, kui asendada moolide arvu konversiooniastmega.
          </p>
          <div>
            \[ -n_{A0} \frac{dX_A}{dt} = -k \frac{n_{A0} (1 - X_A)}{V} \frac{C_{B0} \dot v_{sisse} t - n_{A0} X_A}{V} V \]
          </div>
          <p>
            Siis saame valemit lihtsustada kuna mõned <em>n<sub>A0</sub></em> ja <em>V</em> muutujad taanduvad välja.
          </p>
          <div>
            \[ \frac{dX_A}{dt} = -k (1 - X_A) (C_{B0} \dot v_{sisse} t - n_{A0} X_A) \frac{1}{V} \]
          </div>
          <p>
            Märka, kuidas aine B jaoks me ei saa lihtsalt kasutada aine B moolide arv reaktisooni alguses kuna aine B lisatakse pidevalt juurde. Selle asemel, me peame iga ajahetkel arvutama, kui palju ainet B on siiamaani lisatud korrutades B kontsentratsiooni sisenevas voos mahtkulu ja ajaga.
          </p>
          <p>
            Nüüd võime kasutada <a href="https://gekko.readthedocs.io/en/latest/">Gekko</a> paketti selleks, et lahendada diferentsiaalvõrrandit. Esiteks, loome Gekko mudelit ja defineerime meie parameetreid.
          </p>
          <pre>
<code class="python">m = GEKKO()

CA0 = m.Param(value=0.05) # mol/L
CB0 = m.Param(value=0.025) # mol/L
V0 = m.Param(value=5) # L
k = m.Param(value=2.2) # L/s/mol
v_in = 0.05 # L/s
nA0 = m.Param(value=CA0.value * V0.value)
</code></pre>
          <p>
            Seejärel võime anda Gekkole need ajahetked, mille juures sooviksime, et lahendust oleks arvutatud.
          </p>
          <pre>
<code class="python">npts = 1000
t_lõpp = 400
m.time = np.linspace(0, t_lõpp, npts) # s</code></pre>
          <p>
            Siis on vaja ka defineerida muutujat, mida me tahame leida, ehk konversiooniaste. Ja paneme esialgseks väärtuseks 0 kuna konversiooniaste on alguses 0.
          </p>
          <pre>
<code class="python">XA = m.Var(0)</code></pre>
          <p>
            Paneme ka kirja diferentsiaalvõrrandit, mida me varem koostasime. <code class="python">.dt()</code> näitab Gekkole, et võtame antud muutuja tuletist aja suhtes.
          </p>
          <pre>
<code class="python">m.Equation(XA.dt() == k * (1 - XA) * (FB0 - nA0 * XA) / V)</code></pre>
          <p>
            Nüüd mudel on koostatud ja võime lahendada seda. <code class="python">IMODE</code> ütleb Gekkole, et teeme dünaamilist simulatsiooni (ehk parameetrid muutuvad ajas või ruumalas). Loome ka joonist selleks, et kuvada, kuidas aine A konversiooniaste muutub ajas.
          </p>
          <pre>
<code class="python">m.options.IMODE = 4
m.solve(disp=False)

plt.figure()
plt.plot(m.time, XA.value)
plt.xlabel('Aeg (s)')
plt.ylabel('X$_A$')
plt.show()</code></pre>
          <img class="inline-img" src="/reactions-course/media/metyylbromiid_XA.png" />
          <p>
            Teades nüüd <em>X<sub>A</sub></em> iga ajahetkel, võime arvutada broomtsüaniidi, metüülamiini ja  metüülbromiidi kontsentratsiooni. Teeme joonist, et seda näidata.
          </p>
          <pre>
<code class="python">CB = (FB0.value - nA0.value * np.asarray(XA.value)) / np.asarray(V.value)
CC = (nA0.value * np.asarray(XA.value)) / np.asarray(V.value)
CA = nA0.value * (1 - np.asarray(XA.value)) / np.asarray(V.value)

plt.figure()
plt.plot(m.time, CA, label='CA')
plt.plot(m.time, CB, label='CB')
plt.plot(m.time, CC, label='CC')
plt.xlabel('Aeg (s)')
plt.ylabel('Kontsentratsioon (mol L$^{-1}$)')
plt.legend(frameon=False)
plt.show()</code></pre>
          <img class="inline-img" src="/reactions-course/media/metyylbromiid_kontsentratsioonid.png" />
          <p>
            Pythoni fail, mida kasutasime siin lahendamiseks, on kättesaadav <a href="https://github.com/zmeri/reactions-course/blob/master/examples/metyylbromiid.py">Githubist</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
